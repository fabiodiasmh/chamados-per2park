import{c as re,as as ve,B as Ve,N as Ie,D as Be,g as xe,r as b,a as C,at as Fe,F as Ue,au as He,G as Ke,av as je,w as be,d as qe,q as ke,u as Se,O as Re,h as _,aa as Me,b as Z,A as We,f as Oe,j as R,aw as Qe,m as Ye,a7 as O,C as Xe,E as Ge,L as Je,k as Ze,p as et,ax as tt,ay as ot,az as at,aA as lt,o as st,T as nt,X as j,Y as k,Z as u,$ as s,_ as l,a3 as z,a4 as U,a6 as y,aj as ge,a0 as S,a2 as Q,ap as ne,aq as pe,ah as fe,ai as ie,aB as it,J as he,a9 as Ce,aC as rt,aD as ct,aE as ut,aF as dt,e as mt}from"./index-BE8DfBw_.js";import{v as vt,a as Te,u as gt,p as Ee,b as pt,c as ft,d as ht,r as $e,s as yt,Q as De,e as bt}from"./QSelect-q0SGygbP.js";import{c as Ae}from"./format-DqjPHcII.js";import{Q as xt,a as wt}from"./QBanner-Da240Ycf.js";import{Q as Pe}from"./QBadge-BLgPB0wb.js";import{Q as _t}from"./QPage-Behg0GmU.js";import{u as qt}from"./use-quasar-Bbj5Ecy2.js";import{u as kt}from"./chamados-OtdS_G61.js";import{u as St}from"./auth-BxROLjNn.js";import"./QItem-BKzL62VN.js";const ye=re({name:"QTooltip",inheritAttrs:!1,props:{...gt,...Be,...ve,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...ve.transitionShow,default:"jump-down"},transitionHide:{...ve.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Te},self:{type:String,default:"top middle",validator:Te},offset:{type:Array,default:()=>[14,14],validator:vt},scrollTarget:Ie,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Ve],setup(t,{slots:r,emit:n,attrs:m}){let p,q;const v=xe(),{proxy:{$q:c}}=v,E=b(null),T=b(!1),d=C(()=>Ee(t.anchor,c.lang.rtl)),f=C(()=>Ee(t.self,c.lang.rtl)),h=C(()=>t.persistent!==!0),{registerTick:N,removeTick:A}=Fe(),{registerTimeout:x}=Ue(),{transitionProps:L,transitionStyle:ee}=He(t),{localScrollTarget:M,changeScrollEvent:W,unconfigureScrollTarget:H}=pt(t,le),{anchorEl:$,canShow:te,anchorEvents:B}=ft({showing:T,configureAnchorEl:G}),{show:ce,hide:Y}=Ke({showing:T,canShow:te,handleShow:ue,handleHide:de,hideOnRouteChange:h,processOnMount:!0});Object.assign(B,{delayShow:P,delayHide:me});const{showPortal:K,hidePortal:oe,renderPortal:ae}=je(v,E,se,"tooltip");if(c.platform.is.mobile===!0){const o={anchorEl:$,innerRef:E,onClickOutside(a){return Y(a),a.target.classList.contains("q-dialog__backdrop")&&We(a),!0}},e=C(()=>t.modelValue===null&&t.persistent!==!0&&T.value===!0);be(e,a=>{(a===!0?ht:$e)(o)}),qe(()=>{$e(o)})}function ue(o){K(),N(()=>{q=new MutationObserver(()=>D()),q.observe(E.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),D(),le()}),p===void 0&&(p=be(()=>c.screen.width+"|"+c.screen.height+"|"+t.self+"|"+t.anchor+"|"+c.lang.rtl,D)),x(()=>{K(!0),n("show",o)},t.transitionDuration)}function de(o){A(),oe(),X(),x(()=>{oe(!0),n("hide",o)},t.transitionDuration)}function X(){q!==void 0&&(q.disconnect(),q=void 0),p!==void 0&&(p(),p=void 0),H(),ke(B,"tooltipTemp")}function D(){yt({targetEl:E.value,offset:t.offset,anchorEl:$.value,anchorOrigin:d.value,selfOrigin:f.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function P(o){if(c.platform.is.mobile===!0){Ae(),document.body.classList.add("non-selectable");const e=$.value,a=["touchmove","touchcancel","touchend","click"].map(i=>[e,i,"delayHide","passiveCapture"]);Se(B,"tooltipTemp",a)}x(()=>{ce(o)},t.delay)}function me(o){c.platform.is.mobile===!0&&(ke(B,"tooltipTemp"),Ae(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),x(()=>{Y(o)},t.hideDelay)}function G(){if(t.noParentEvent===!0||$.value===null)return;const o=c.platform.is.mobile===!0?[[$.value,"touchstart","delayShow","passive"]]:[[$.value,"mouseenter","delayShow","passive"],[$.value,"mouseleave","delayHide","passive"]];Se(B,"anchor",o)}function le(){if($.value!==null||t.scrollTarget!==void 0){M.value=Re($.value,t.scrollTarget);const o=t.noParentEvent===!0?D:Y;W(M.value,o)}}function F(){return T.value===!0?_("div",{...m,ref:E,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",m.class],style:[m.style,ee.value],role:"tooltip"},Z(r.default)):null}function se(){return _(Me,L.value,F)}return qe(X),Object.assign(v.proxy,{updatePosition:D}),ae}}),Ct=re({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(t,{slots:r}){const n=Oe(Qe,R);if(n===R)return console.error("QTimelineEntry needs to be child of QTimeline"),R;const m=C(()=>`q-timeline__entry q-timeline__entry--${t.side}`+(t.icon!==void 0||t.avatar!==void 0?" q-timeline__entry--icon":"")),p=C(()=>`q-timeline__dot text-${t.color||n.color}`),q=C(()=>n.layout==="comfortable"&&n.side==="left");return()=>{const v=Ye(r.default,[]);if(t.body!==void 0&&v.unshift(t.body),t.heading===!0){const T=[_("div"),_("div"),_(t.tag,{class:"q-timeline__heading-title"},v)];return _("div",{class:"q-timeline__heading"},q.value===!0?T.reverse():T)}let c;t.icon!==void 0?c=[_(O,{class:"row items-center justify-center",name:t.icon})]:t.avatar!==void 0&&(c=[_("img",{class:"q-timeline__dot-img",src:t.avatar})]);const E=[_("div",{class:"q-timeline__subtitle"},[_("span",{},Z(r.subtitle,[t.subtitle]))]),_("div",{class:p.value},c),_("div",{class:"q-timeline__content"},[_("h6",{class:"q-timeline__title"},Z(r.title,[t.title]))].concat(v))];return _("li",{class:m.value},q.value===!0?E.reverse():E)}}}),Tt=re({name:"QTimeline",props:{...Xe,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},layout:{type:String,default:"dense",validator:t=>["dense","comfortable","loose"].includes(t)}},setup(t,{slots:r}){const n=xe(),m=Ge(t,n.proxy.$q);Je(Qe,t);const p=C(()=>`q-timeline q-timeline--${t.layout} q-timeline--${t.layout}--${t.side}`+(m.value===!0?" q-timeline--dark":""));return()=>_("ul",{class:p.value},Z(r.default))}}),Et={position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,validator:t=>t.length===2},expand:Boolean};function $t(){const{props:t,proxy:{$q:r}}=xe(),n=Oe(Ze,R);if(n===R)return console.error("QPageSticky needs to be child of QLayout"),R;const m=C(()=>{const f=t.position;return{top:f.indexOf("top")!==-1,right:f.indexOf("right")!==-1,bottom:f.indexOf("bottom")!==-1,left:f.indexOf("left")!==-1,vertical:f==="top"||f==="bottom",horizontal:f==="left"||f==="right"}}),p=C(()=>n.header.offset),q=C(()=>n.right.offset),v=C(()=>n.footer.offset),c=C(()=>n.left.offset),E=C(()=>{let f=0,h=0;const N=m.value,A=r.lang.rtl===!0?-1:1;N.top===!0&&p.value!==0?h=`${p.value}px`:N.bottom===!0&&v.value!==0&&(h=`${-v.value}px`),N.left===!0&&c.value!==0?f=`${A*c.value}px`:N.right===!0&&q.value!==0&&(f=`${-A*q.value}px`);const x={transform:`translate(${f}, ${h})`};return t.offset&&(x.margin=`${t.offset[1]}px ${t.offset[0]}px`),N.vertical===!0?(c.value!==0&&(x[r.lang.rtl===!0?"right":"left"]=`${c.value}px`),q.value!==0&&(x[r.lang.rtl===!0?"left":"right"]=`${q.value}px`)):N.horizontal===!0&&(p.value!==0&&(x.top=`${p.value}px`),v.value!==0&&(x.bottom=`${v.value}px`)),x}),T=C(()=>`q-page-sticky row flex-center fixed-${t.position} q-page-sticky--${t.expand===!0?"expand":"shrink"}`);function d(f){const h=Z(f.default);return _("div",{class:T.value,style:E.value},t.expand===!0?h:[_("div",h)])}return{$layout:n,getStickyContent:d}}const Dt=re({name:"QPageSticky",props:Et,setup(t,{slots:r}){const{getStickyContent:n}=$t();return()=>n(r)}});function Ne(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const r=parseInt(t,10);return isNaN(r)?0:r}const ze=et({name:"close-popup",beforeMount(t,{value:r}){const n={depth:Ne(r),handler(m){n.depth!==0&&setTimeout(()=>{const p=ot(t);p!==void 0&&at(p,m,n.depth)})},handlerKey(m){tt(m,13)===!0&&n.handler(m)}};t.__qclosepopup=n,t.addEventListener("click",n.handler),t.addEventListener("keyup",n.handlerKey)},updated(t,{value:r,oldValue:n}){r!==n&&(t.__qclosepopup.depth=Ne(r))},beforeUnmount(t){const r=t.__qclosepopup;t.removeEventListener("click",r.handler),t.removeEventListener("keyup",r.handlerKey),delete t.__qclosepopup}}),At={class:"container"},Pt={class:"text-subtitle1 text-weight text-white column items-center"},Nt={class:"filtros-section q-mb-md"},zt={class:"row q-gutter-sm q-col-gutter-xs"},Ot={class:"q-gutter-xs justify-end q-mt-sm q-mt-sm-sm"},Qt={key:0,class:"loading-container flex flex-center"},Lt={key:2,class:"empty-state text-center q-py-xl"},Vt={key:3,class:"chamados-list"},It={class:"chamado-header"},Bt={class:"chamado-id-data text-h6 text-blue-3 text-weight-medium"},Ft={class:"chamado-status-local flex items-center"},Ut={class:"text-orange-3 text-weight-medium text-body1 chamado-nome-local"},Ht={class:"chamado-categoria text-body2 text-blue-3 text-weight-medium"},Kt={class:"chamado-descricao q-px-sm q-pb-sm"},jt={class:"text-body1 text-grey-2 line-clamp-3"},Rt={class:"text-subtitle1 text-bold col-12 col-sm-6 q-mb-xs q-sm-mb-0"},Mt={class:"col-6 col-sm-2 text-center q-mb-xs q-sm-mb-0"},Wt={class:"col-6 col-sm-3 text-center q-mb-xs q-sm-mb-0"},Yt={class:"col-12 col-sm-1 text-right q-mt-sm q-sm-mt-0"},Xt={class:"column q-gutter-sm"},Gt={class:"col-12"},Jt={class:"row wrap items-center q-gutter-sm text-body2"},Zt={class:"row items-center col-12 q-mb-xs"},eo={class:"text-weight-medium"},to={class:"q-ml-md"},oo={class:"q-ml-md"},ao={class:"col-12 q-mt-sm"},lo={class:"row items-center q-gutter-sm flex-wrap"},so={class:"col-12"},no={key:0,class:"col-12"},io={class:"row wrap q-gutter-xs"},ro={class:"col-12 q-mt-sm"},co={class:"row nowrap justify-center items-center q-gutter-sm q-mt-xs"},uo={class:"col-12 q-mt-xs"},mo={class:"row nowrap justify-center items-center q-gutter-sm q-mt-xs"},vo={key:1,class:"col-12"},go={class:"text-caption text-grey-8"},po={class:"text-body2 q-mt-xs"},Co={__name:"ChamadosPage",setup(t){const r=St(),n=kt(),m=qt(),p=b([]),q=b([]),v=b(!0),c=b(null),E=b(""),T=b(!1),d=b(null);let f=null;const h=b(""),N=b(null),A=b(""),x=b(""),L=b(null),ee=b(0),M=b(!1),W=b(!1),H=b("recentes"),$=lt(),te=()=>{M.value=window.scrollY>400},B=()=>{window.scrollTo({top:0,behavior:"smooth"})},ce=()=>{A.value="",L.value=null,H.value="recentes",x.value=""},Y=[{label:"Todos",value:null},{label:"Abertos",value:0},{label:"Em analise",value:1},{label:"Em atendimento",value:2},{label:"Feedback",value:8},{label:"Nivel 2",value:12},{label:"Nivel 3",value:10},{label:"Aguardando resposta",value:9},{label:"Aguardando assistencia",value:11},{label:"Fechado",value:5}],K=o=>({0:"Aberto",1:"Em análise",2:"Em atendimento",8:"Feedback",9:"Aguardando resposta",10:"Nível 3",11:"Aguardando assistência",12:"Nível 2",5:"Fechado"})[o]||"Desconhecido",oe=o=>{let e=o.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("55")||(e="55"+e),e},ae=async()=>{var e;W.value=!0,h.value=((e=h.value)==null?void 0:e.trim())||"";const o=h.value;try{if(!o){m.dialog({title:"Atenção",message:"Por favor, informe um número de série.",color:"warning",ok:{label:"OK",color:"warning"}});return}const a=await n.satSerie(o);if(a.data.length===0)m.dialog({title:"Erro",message:"Número de série não encontrado!",color:"negative",ok:{label:"OK",color:"negative"}});else if(a.data.length>1)m.dialog({title:"Atenção",message:"Está faltando caracteres no número de série, mais de um SAT encontrado!",color:"warning",ok:{label:"OK",color:"warning"}}),h.value="";else{const i=a.data[0];h.value===i.numSerie?(N.value=i,m.dialog({title:"SAT Encontrado - N/S: "+i.numSerie,html:!0,message:`
            <ul style="text-align: left; margin: 0; padding-left: 25px;">

              <li><strong>Cliente:</strong> ${i.cliente.nomeFantasia}</li>
              <li><strong>Local:</strong> ${i.localAtendimento.nomeLocal}</li>
              <li><strong>Equipamento:</strong> ${i.equipamento.codEEquip}</li>
              <li><strong>Ativo:</strong> ${i.indAtivo?"sim":"não"}</li>
              <li>
  <strong>Tipo de intervenção:</strong>
  ${i.indAtivo?'<strong><span style="color: blue;">Corretiva</span></strong>':'<strong><span style="color: red;">Orçamento</span></strong>'}
</li>
<li><strong>Nome solicitante:</strong> ${n.detalhe_chamado.ContactName}</li>
<li><strong>Telefone solicitante:</strong> ${n.detalhe_chamado.ContactPhone}</li>
<li><strong>Chamado cliente:</strong> ${n.detalhe_chamado.Id}</li>
<li><strong>Defeito:</strong> ${n.detalhe_chamado.Description}</li>

            </ul>
          `,color:"positive",ok:{label:"OK",color:"positive"},onOk:async()=>{h.value=""}})):(m.dialog({title:"Erro",message:"Número de série não corresponde ao retornado!",color:"negative",ok:{label:"OK",color:"negative"}}),h.value="")}}catch{m.dialog({title:"Erro",message:"Ocorreu um erro durante a busca do SAT. Tente novamente.",color:"negative",ok:{label:"OK",color:"negative"}}),h.value=""}finally{W.value=!1,h.value=""}};function ue(){const o=new Date().getHours();return o>=0&&o<12?"Bom dia, ":o>=12&&o<18?"Boa tarde, ":"Boa noite, "}const de=o=>{const e=oe(o),a=`whatsapp://send?phone=${e}`,i=`https://wa.me/${e}`;window.location.href=a,setTimeout(()=>{document.hidden||window.open(i,"_blank")},1e3)},X=o=>({0:"green",1:"amber",2:"orange",8:"blue",9:"amber",10:"purple",11:"blue-grey",12:"indigo"})[o]||"grey",D=C(()=>{let o=[...p.value];if(L.value!==null&&(o=o.filter(e=>e.Status===L.value)),A.value){const e=A.value.toLowerCase();o=o.filter(a=>{var i,w,V,I;return((w=(i=a.Local)==null?void 0:i.Name)==null?void 0:w.toLowerCase().includes(e))||((V=a.Description)==null?void 0:V.toLowerCase().includes(e))||((I=a.User.Name)==null?void 0:I.toLowerCase().includes(e))})}if(x.value){const e=x.value.trim();e&&(o=o.filter(a=>a.Id!=null&&a.Id.toString().includes(e)))}return o.sort((e,a)=>{const i=new Date(e.OpeningDate),w=new Date(a.OpeningDate);return H.value==="recentes"?w-i:i-w}),o}),P=(o,e,a)=>{m.dialog({title:e,prompt:{model:a,counter:!0,maxlength:"400",outlined:!0,label:"Descrição",type:"textarea",isValid:i=>i&&i.trim().length>0},cancel:!0,ok:"Confirmar",cancel:"Cancelar"}).onOk(async i=>{await me(o,i.trim())})},me=async(o,e)=>{var a;if((a=d.value)!=null&&a.Id)try{const i=await n.atualizarStatusNoStore(o,e);m.notify({position:"top",color:"positive",message:"Atualizado!",icon:"check"}),await se(d.value.Id),d.value={...n.detalhe_chamado};const w={chamado:d.value.Id,status:o,email:r.usuario.Login,nome:r.usuario.Name};console.log("enviado back "+w),await n.meus_chamados(w)}catch(i){m.notify({position:"top",color:"negative",message:"Erro ao atualizar chamado: "+(i.message||"tente novamente"),icon:"error"})}finally{await F()}},G=o=>o?new Date(o).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"—";be(T,o=>{o||setTimeout(()=>{window.scrollTo({top:ee.value,behavior:"instant"})},100)});const le=async o=>{ee.value=window.scrollY,v.value=!0;try{await se(o.Id),d.value=q.value||o,T.value=!0}finally{v.value=!1}},F=async()=>{const o=window.scrollY;v.value=!0,c.value=null;try{const e=await n.fetchChamados();if(!e.success)throw new Error(e.message||"Falha ao carregar chamados");p.value=e.data||[],mt(()=>{window.scrollTo({top:o,behavior:"auto"})}),E.value=new Date().toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){c.value=e.message||"Erro desconhecido"}finally{v.value=!1}},se=async o=>{v.value=!0,c.value=null;try{const e=await n.fetchDetalheChamados(o);if(!e.success)throw new Error(e.message||"Falha ao carregar chamados");q.value=e.data||[]}catch(e){c.value=e.message||"Erro desconhecido"}finally{v.value=!1}};return st(()=>{F(),f=setInterval(F,12e4),window.addEventListener("scroll",te);const o=$.query.status;if(o!==void 0){const a=parseInt(o,10);isNaN(a)||(L.value=a)}const e=$.query.local;e&&(A.value=decodeURIComponent(e))}),nt(()=>{f&&clearInterval(f),window.removeEventListener("scroll",te)}),(o,e)=>(k(),j(_t,{class:"dashboard-page"},{default:u(()=>[s("div",At,[s("div",Pt,y(D.value.length)+" chamados • Atualizado: "+y(E.value),1),s("div",Nt,[s("div",zt,[l(ge,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),dense:"",outlined:"",placeholder:"Nº",class:"col-12 col-sm-2","input-class":"text-white","bg-color":"dark",type:"text"},{prepend:u(()=>[l(O,{name:"tag",size:"sm",color:"grey-5"})]),_:1},8,["modelValue"]),l(ge,{modelValue:A.value,"onUpdate:modelValue":e[1]||(e[1]=a=>A.value=a),dense:"",outlined:"",dark:"",color:"blue-4",placeholder:"Local ou descrição...",class:"col-12 col-sm","input-class":"text-white","bg-color":"dark"},{prepend:u(()=>[l(O,{name:"search",size:"sm",color:"grey-5"})]),_:1},8,["modelValue"]),l(De,{modelValue:L.value,"onUpdate:modelValue":e[2]||(e[2]=a=>L.value=a),options:Y,dense:"",outlined:"",dark:"",color:"blue-4","emit-value":"","map-options":"",class:"col-12 col-sm-4 col-md-3","input-class":"text-white","bg-color":"dark","options-dark":"","popup-content-class":"bg-dark text-white","hide-bottom-space":""},null,8,["modelValue"]),l(De,{modelValue:H.value,"onUpdate:modelValue":e[3]||(e[3]=a=>H.value=a),options:[{label:"Recentes",value:"recentes"},{label:"Antigos",value:"antigos"}],dense:"",outlined:"",dark:"",color:"blue-4","emit-value":"","map-options":"",class:"col-12 col-sm-3 col-md-2","input-class":"text-white","bg-color":"dark","options-dark":"","popup-content-class":"bg-dark text-white","hide-bottom-space":""},null,8,["modelValue"]),s("div",Ot,[l(S,{dense:"",flat:"",icon:"refresh",color:"grey-5",onClick:F,disable:v.value,size:"sm",class:"col-6 col-sm-auto"},{default:u(()=>[l(ye,null,{default:u(()=>[...e[16]||(e[16]=[Q("Atualizar",-1)])]),_:1})]),_:1},8,["disable"]),l(S,{dense:"",flat:"",icon:"clear",color:"grey-5",onClick:ce,size:"sm",class:"col-6 col-sm-auto"},{default:u(()=>[l(ye,null,{default:u(()=>[...e[17]||(e[17]=[Q("Limpar filtros",-1)])]),_:1})]),_:1})])])]),v.value?(k(),z("div",Qt,[l(xt,{color:"primary",size:"2em"}),e[18]||(e[18]=s("div",{class:"q-mt-md text-caption text-grey-6"},"Carregando...",-1))])):U("",!0),c.value?(k(),j(wt,{key:1,class:"bg-negative text-white q-mb-md"},{avatar:u(()=>[l(O,{name:"error",color:"white",size:"sm"})]),action:u(()=>[l(S,{flat:"",color:"white",size:"sm",label:"Tentar novamente",onClick:F})]),default:u(()=>[Q(" "+y(c.value)+" ",1)]),_:1})):U("",!0),!v.value&&!c.value&&(!D.value||D.value.length===0)?(k(),z("div",Lt,[l(O,{name:"inbox",size:"4em",color:"grey-5"}),e[19]||(e[19]=s("div",{class:"text-subtitle1 text-grey-5 q-mt-md"}," Nenhum chamado aberto no momento ",-1))])):U("",!0),!v.value&&!c.value&&D.value&&D.value.length>0?(k(),z("div",Vt,[(k(!0),z(ne,null,pe(D.value,a=>(k(),j(fe,{key:a.Id,class:"chamado-card",onClick:i=>le(a)},{default:u(()=>[l(ie,{class:""},{default:u(()=>{var i,w;return[s("div",It,[s("div",Bt,y(a.Id)+" • "+y(G(a.OpeningDate)),1),s("div",Ft,[l(Pe,{color:X(a.Status),"text-color":"white",size:"xs",class:"q-mr-xs",style:{"line-height":"1.2",padding:"2px 10px","font-size":"0.8rem"},outline:"",rounded:""},{default:u(()=>[Q(y(K(a.Status)),1)]),_:2},1032,["color"]),s("span",Ut,y(((i=a.Local)==null?void 0:i.Name)||"Local não informado"),1)]),s("div",Ht,y(((w=a.Category)==null?void 0:w.Name)||"—"),1)]),s("div",Kt,[s("div",jt,y(a.Description),1)])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])):U("",!0)]),l(it,{modelValue:T.value,"onUpdate:modelValue":e[15]||(e[15]=a=>T.value=a),class:"blurred-dialog"},{default:u(()=>[l(fe,{class:"modal-completo",style:{"min-width":"95vw",width:"95vw","max-width":"95vw"}},{default:u(()=>[l(ie,{class:"row q-pa-md items-center"},{default:u(()=>{var a,i,w,V,I;return[s("div",Rt," Chamado: "+y((a=d.value)==null?void 0:a.Id)+" - "+y(((w=(i=d.value)==null?void 0:i.Local)==null?void 0:w.Name)||"Local não informado"),1),s("div",Mt,[l(O,{name:"schedule",color:"orange-8",size:"20px",class:"q-mr-sm"}),Q(" "+y(G((V=d.value)==null?void 0:V.OpeningDate)),1)]),s("div",Wt,[l(Pe,{color:X((I=d.value)==null?void 0:I.Status),"text-color":"white",size:"md"},{default:u(()=>{var J;return[Q(y(K((J=d.value)==null?void 0:J.Status)),1)]}),_:1},8,["color"])]),s("div",Yt,[he(l(S,{dense:"",flat:"",icon:"close",round:""},null,512),[[ze]])])]}),_:1}),l(Ce),l(ie,{class:"q-pt-sm"},{default:u(()=>{var a,i,w,V,I,J,we;return[s("div",Xt,[s("div",Gt,[s("div",Jt,[s("div",Zt,[l(O,{name:"fas fa-user",size:"18px",class:"q-mr-sm",style:{color:"#666"}}),s("span",eo,y(((a=d.value)==null?void 0:a.ContactName)||"—"),1),s("div",to,[l(O,{name:"mail",color:"blue-8",size:"18px",class:"q-mr-sm"}),s("span",null,y(((i=d.value)==null?void 0:i.ContactMail)||"—"),1)]),s("div",oo,[(w=d.value)!=null&&w.ContactPhone?(k(),z("a",{key:0,onClick:e[4]||(e[4]=rt(g=>de(d.value.ContactPhone),["prevent"])),style:{cursor:"pointer",display:"inline-flex","align-items":"center","text-decoration":"none",color:"inherit"}},[l(O,{name:"fab fa-whatsapp",size:"18px",class:"q-mr-sm",style:{color:"#25d366"}}),s("span",null,y(d.value.ContactPhone),1)])):(k(),z(ne,{key:1},[l(O,{name:"fab fa-whatsapp",size:"18px",class:"q-mr-sm",style:{color:"#25d366",opacity:"0.5"}}),e[20]||(e[20]=s("span",null,"—",-1))],64))])]),s("div",ao,[s("div",lo,[e[21]||(e[21]=s("div",{class:"text-body2 text-weight-medium"}," Consultar SAT ",-1)),l(ge,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=g=>h.value=g),outlined:"",dense:"",placeholder:"Digite o número de série",class:"col-11 col-sm-2",onKeyup:ct(ae,["enter"])},null,8,["modelValue"]),l(S,{class:"col-12 col-sm-auto q-mt-sm q-sm-mt-0",color:"blue",icon:"check_circle",label:"Verificar",dense:"",onClick:ae,rounded:"",loading:W.value},null,8,["loading"])])])])]),s("div",so,[e[22]||(e[22]=s("div",{class:"text-caption text-grey-7 q-mb-xs"},"Descrição",-1)),l(fe,{flat:"",bordered:"",class:"bg-grey-2"},{default:u(()=>[l(ie,{class:"q-pa-md text-body1"},{default:u(()=>{var g;return[Q(y(((g=d.value)==null?void 0:g.Description)||"Sem descrição"),1)]}),_:1})]),_:1})]),(I=(V=d.value)==null?void 0:V.Equipments)!=null&&I.length?(k(),z("div",no,[e[23]||(e[23]=s("div",{class:"text-caption text-grey-7 q-mb-xs"},"Equipamentos",-1)),s("div",io,[(k(!0),z(ne,null,pe(d.value.Equipments,g=>(k(),j(bt,{key:g.Id,dense:"",color:"blue-1","text-color":"grey-9",class:"text-weight-medium"},{default:u(()=>[Q(y(g.Name),1)]),_:2},1024))),128))])])):U("",!0),s("div",ro,[e[24]||(e[24]=s("div",{class:"text-caption text-grey-7"},"Ações",-1)),s("div",co,[d.value.Status==0?(k(),j(S,{key:0,size:"md",color:"blue",icon:"assignment_turned_in",label:"Em atendimento",onClick:e[6]||(e[6]=g=>P(2,"Iniciar atendimento",ue()+" o chamado foi recepcionado e está na fila de atendimento.")),push:"",outline:"",rounded:""})):U("",!0),l(S,{size:"md",color:"teal",icon:"edit_note",label:"Responder",onClick:e[7]||(e[7]=g=>P(9,"Resposta","")),push:"",outline:"",rounded:""}),l(S,{size:"md",color:"blue-grey-5",icon:"photo_camera",label:"Evidência",onClick:e[8]||(e[8]=g=>P(9,"Pedir evidência","Favor encaminhar a evidência para o WhatsApp.")),push:"",outline:"",rounded:""}),l(S,{size:"md",color:"deep-purple",icon:"fact_check",label:"Validação",onClick:e[9]||(e[9]=g=>P(9,"Pedir validação","Favor verificar e validar.")),push:"",outline:"",rounded:""}),l(S,{size:"md",color:"indigo",icon:"qr_code",label:"Nº série",onClick:e[10]||(e[10]=g=>P(9,"Solicitar número de série","Solicito o número de série do(s) equipamento(s).")),push:"",outline:"",rounded:""}),l(S,{size:"md",color:"green",icon:"check_circle",label:"Fechar",onClick:e[11]||(e[11]=g=>P(5,"Chamado resolvido e finalizado","Chamado encerrado.")),push:"",outline:"",rounded:""})])]),s("div",uo,[e[25]||(e[25]=s("div",{class:"text-caption text-grey-7"},"Encaminhamentos",-1)),s("div",mo,[l(S,{size:"md",color:"red",icon:"build",label:"Assistência técnica",onClick:e[12]||(e[12]=g=>P(11,"Encaminhar para assistência técnica","Encaminhado para assistência técnica OS: ")),push:"",outline:"",rounded:""}),l(S,{size:"md",color:"orange",icon:"engineering",label:"Nível 2",onClick:e[13]||(e[13]=g=>P(12,"Chamado encaminhado para nível 2","Chamado encaminhado para nível 2.")),push:"",outline:"",rounded:""}),l(S,{size:"md",color:"brown",icon:"precision_manufacturing",label:"Nível 3",onClick:e[14]||(e[14]=g=>P(10,"Chamado encaminhado para nível 3","Chamado encaminhado para nível 3.")),push:"",outline:"",rounded:""})])]),(we=(J=d.value)==null?void 0:J.HistoryCalls)!=null&&we.length?(k(),z("div",vo,[e[26]||(e[26]=s("div",{class:"text-caption text-grey-7 q-mt-md q-mb-xs"}," Histórico de Atendimento ",-1)),l(Tt,{color:"primary",class:"q-mt-md"},{default:u(()=>[(k(!0),z(ne,null,pe(d.value.HistoryCalls,(g,Le)=>{var _e;return k(),j(Ct,{key:Le,title:((_e=g.User)==null?void 0:_e.Name)||"Sistema",subtitle:G(g.Date),icon:"chat","icon-color":"primary"},{default:u(()=>[s("div",go," Status: "+y(K(g.Status)),1),s("div",po,y(g.Description||"Sem descrição"),1)]),_:2},1032,["title","subtitle"])}),128))]),_:1})])):U("",!0)])]}),_:1}),l(Ce),l(ut,{align:"center",class:"q-pa-md"},{default:u(()=>[he(l(S,{label:"Fechar",color:"primary",outline:"",class:"full-width"},null,512),[[ze]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Dt,{position:"bottom-right",offset:[18,18]},{default:u(()=>[he(l(S,{fab:"",icon:"arrow_upward",color:"primary",onClick:B,class:"shadow-4"},{default:u(()=>[l(ye,null,{default:u(()=>[...e[27]||(e[27]=[Q("Ir para o topo",-1)])]),_:1})]),_:1},512),[[dt,M.value]])]),_:1})]),_:1}))}};export{Co as default};
