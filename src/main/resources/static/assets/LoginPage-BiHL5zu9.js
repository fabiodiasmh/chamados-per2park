import{a as q,c as $,r as S,F as N,i as K,o as R,h as _,aa as W,b as D,ab as X,w as Y,ac as B,g as O,L as Z,ad as G,ae as J,A as j,e as ee,af as te,ag as ae,V as oe,X as ie,Y as ne,Z as p,$ as w,_ as g,ah as se,ai as re,aj as Q,a7 as V,a0 as le,a5 as A,a2 as ue}from"./index-BE8DfBw_.js";import{Q as ce}from"./QPage-Behg0GmU.js";import{u as de}from"./auth-BxROLjNn.js";import{u as me}from"./use-quasar-Bbj5Ecy2.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ge={ratio:[String,Number]};function ve(e,y){return q(()=>{const s=Number(e.ratio||(y!==void 0?y.value:void 0));return isNaN(s)!==!0&&s>0?{paddingBottom:`${100/s}%`}:null})}const ye=1.7778,Se=$({name:"QImg",props:{...ge,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ye},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:y,emit:s}){const x=S(e.initialRatio),l=ve(e,x),u=O(),{registerTimeout:c,removeTimeout:h}=N(),{registerTimeout:P,removeTimeout:r}=N(),o=q(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),i=q(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),v=[S(null),S(o.value)],t=S(0),d=S(!1),b=S(!1),I=q(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),T=q(()=>({width:e.width,height:e.height})),E=q(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),n=q(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function m(){if(r(),e.loadingShowDelay===0){d.value=!0;return}P(()=>{d.value=!0},e.loadingShowDelay)}function f(){r(),d.value=!1}function z({target:a}){B(u)===!1&&(h(),x.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,L(a,1))}function L(a,C){C===1e3||B(u)===!0||(a.complete===!0?H(a):c(()=>{L(a,C+1)},50))}function H(a){B(u)!==!0&&(t.value=t.value^1,v[t.value].value=null,f(),a.getAttribute("__qerror")!=="true"&&(b.value=!1),s("load",a.currentSrc||a.src))}function M(a){h(),f(),b.value=!0,v[t.value].value=i.value,v[t.value^1].value=o.value,s("error",a)}function F(a){const C=v[a].value,k={key:"img_"+a,class:E.value,style:n.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...C};return t.value===a?Object.assign(k,{class:k.class+"current",onLoad:z,onError:M}):k.class+="loaded",_("div",{class:"q-img__container absolute-full",key:"img"+a},_("img",k))}function U(){return d.value===!1?_("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},D(y[b.value===!0?"error":"default"])):_("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},y.loading!==void 0?y.loading():e.noSpinner===!0?void 0:[_(X,{color:e.spinnerColor,size:e.spinnerSize})])}{let a=function(){Y(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,C=>{h(),b.value=!1,C===null?(f(),v[t.value^1].value=o.value):m(),v[t.value].value=C},{immediate:!0})};K.value===!0?R(a):a()}return()=>{const a=[];return l.value!==null&&a.push(_("div",{key:"filler",style:l.value})),v[0].value!==null&&a.push(F(0)),v[1].value!==null&&a.push(F(1)),a.push(_(W,{name:"q-transition--fade"},U)),_("div",{key:"main",class:I.value,style:T.value,role:"img","aria-label":e.alt},a)}}}),he=$({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:y,emit:s}){const x=O(),l=S(null);let u=0;const c=[];function h(t){const d=typeof t=="boolean"?t:e.noErrorFocus!==!0,b=++u,I=(n,m)=>{s(`validation${n===!0?"Success":"Error"}`,m)},T=n=>{const m=n.validate();return typeof m.then=="function"?m.then(f=>({valid:f,comp:n}),f=>({valid:!1,comp:n,err:f})):Promise.resolve({valid:m,comp:n})};return(e.greedy===!0?Promise.all(c.map(T)).then(n=>n.filter(m=>m.valid!==!0)):c.reduce((n,m)=>n.then(()=>T(m).then(f=>{if(f.valid===!1)return Promise.reject(f)})),Promise.resolve()).catch(n=>[n])).then(n=>{if(n===void 0||n.length===0)return b===u&&I(!0),!0;if(b===u){const{comp:m,err:f}=n[0];if(f!==void 0&&console.error(f),I(!1,m),d===!0){const z=n.find(({comp:L})=>typeof L.focus=="function"&&B(L.$)===!1);z!==void 0&&z.comp.focus()}}return!1})}function P(){u++,c.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function r(t){t!==void 0&&j(t);const d=u+1;h().then(b=>{d===u&&b===!0&&(e.onSubmit!==void 0?s("submit",t):(t==null?void 0:t.target)!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function o(t){t!==void 0&&j(t),s("reset"),ee(()=>{P(),e.autofocus===!0&&e.noResetFocus!==!0&&i()})}function i(){te(()=>{if(l.value===null)return;const t=l.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||l.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||l.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(l.value.querySelectorAll("[tabindex]"),d=>d.tabIndex!==-1);t==null||t.focus({preventScroll:!0})})}Z(ae,{bindComponent(t){c.push(t)},unbindComponent(t){const d=c.indexOf(t);d!==-1&&c.splice(d,1)}});let v=!1;return G(()=>{v=!0}),J(()=>{v===!0&&e.autofocus===!0&&i()}),R(()=>{e.autofocus===!0&&i()}),Object.assign(x.proxy,{validate:h,resetValidation:P,submit:r,reset:o,focus:i,getValidationComponents:()=>c}),()=>_("form",{class:"q-form",ref:l,onSubmit:r,onReset:o},D(y.default))}}),be={class:"login-container"},pe={class:"login-content"},_e={class:"row justify-center q-my-sm",style:{width:"100%"}},we=Object.assign({name:"LoginPage"},{__name:"LoginPage",setup(e){const y=oe(),s=de(),x=me(),l=S({Login:"portaria@perto.com.br",Password:"perto123"}),u=q({get:()=>s.ip_servidor_store,set:r=>{s.ip_servidor_store=r,localStorage.setItem("ip_servidor",r)}}),c=S(!1),h=S(null),P=async()=>{h.value=null,localStorage.setItem("ip_servidor",u.value);const r=await s.login(l.value);h.value={success:r.success,message:r.success?"Login realizado com sucesso!":r.message,data:r.data},r.success?(x.notify({type:"positive",message:"Login realizado com sucesso!",position:"top"}),setTimeout(()=>{y.push("/dashboard")},1e3)):x.notify({type:"negative",message:r.message,position:"top"})};return R(()=>{}),(r,o)=>(ne(),ie(ce,{class:"login-page"},{default:p(()=>[w("div",be,[o[6]||(o[6]=w("div",{class:"background-animation"},[w("div",{class:"floating-shapes"},[w("div",{class:"shape shape-5"})])],-1)),w("div",pe,[o[5]||(o[5]=w("div",{class:"brand-section"},[w("div",{class:"logo-container"})],-1)),g(se,{class:"login-card"},{default:p(()=>[g(Se,{src:"wps-perto.jpg"}),g(re,{class:"q-ma-md",style:{width:"auto"}},{default:p(()=>[g(he,{onSubmit:P,class:"q-gutter-md"},{default:p(()=>[g(Q,{modelValue:l.value.Login,"onUpdate:modelValue":o[0]||(o[0]=i=>l.value.Login=i),label:"Login Perto",type:"email",dense:"",class:"custom-input",rules:[i=>!!i||"E-mail é obrigatório",i=>/.+@.+\..+/.test(i)||"E-mail inválido"],"lazy-rules":""},{prepend:p(()=>[g(V,{name:"email",color:"primary"})]),_:1},8,["modelValue","rules"]),g(Q,{modelValue:l.value.Password,"onUpdate:modelValue":o[2]||(o[2]=i=>l.value.Password=i),label:"Senha",type:c.value?"text":"password",dense:"",class:"custom-input",rules:[i=>!!i||"Senha é obrigatória"],"lazy-rules":""},{prepend:p(()=>[g(V,{name:"lock",color:"primary"})]),append:p(()=>[g(V,{name:c.value?"visibility_off":"visibility",class:"cursor-pointer",color:"primary",onClick:o[1]||(o[1]=i=>c.value=!c.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),w("div",_e,[g(Q,{style:{width:"170px"},modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=i=>u.value=i),label:"IP Servidor",type:"text",dense:"",outlined:"",rounded:"",class:"custom-input","lazy-rules":""},{prepend:p(()=>[g(V,{name:"computer",color:"primary"})]),_:1},8,["modelValue"])]),g(le,{type:"submit",class:"login-btn full-width",size:"md",loading:A(s).loading,disable:A(s).loading},{default:p(()=>[g(V,{name:"login",class:"q-mr-sm"}),o[4]||(o[4]=ue(" Acessar ",-1))]),_:1},8,["loading","disable"])]),_:1})]),_:1})]),_:1})])])]),_:1}))}}),Ve=fe(we,[["__scopeId","data-v-84f73da7"]]);export{Ve as default};
