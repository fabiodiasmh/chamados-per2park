import{r as T,o as I,X as C,Y as h,Z as t,$ as n,_ as a,ah as L,ai as b,a0 as y,a3 as x,a7 as w,ap as $,aq as B,a1 as V,a4 as z,a2 as u,a6 as c,a5 as p}from"./index-MSiwPzFN.js";import{a as _,b as g,Q as d}from"./QItem-CmzAJ1OC.js";import{Q}from"./QList-CYbiKwhZ.js";import{Q as O}from"./QBadge-BY_7K6WT.js";import{Q as j}from"./QPage-CaTPjRuL.js";import{u as D,a as S}from"./auth-dynkwFMp.js";import{u as R}from"./chamados-D6EnNo3q.js";import{u as F}from"./use-quasar-DNJnqscq.js";const J={class:"row q-gutter-md"},M={class:"col-12"},U={class:"row q-gutter-md"},X={class:"col-12"},Y={key:0,class:"text-center text-grey-6 q-py-lg"},Z={key:1},G={class:"text-caption"},H={class:"col-12"},K={class:"row q-gutter-md"},W={class:"col-12 col-md-6"},aa={class:"col-12 col-md-6"},ia=Object.assign({name:"TestPage"},{__name:"TestPage",setup(ta){const m=D(),v=R();F();const i=T({login:!1,chamados:!1,status:!1,locais:!1}),k=T([]);I(()=>{m.initializeAuth()});const f=(r,e,o,l=null)=>{k.value.unshift({test:r,success:e,message:o,data:l,timestamp:new Date().toLocaleTimeString()})},q=async()=>{var r,e,o,l;i.value.login=!0;try{const s={Login:"portaria@perto.com.br",Password:"perto123"},A=await S.post("/login",s);f("Login",!0,"Login realizado com sucesso",A.data),m.isAuthenticated=!0,m.user=s,m.token=((r=A.data)==null?void 0:r.token)||"session-token"}catch(s){f("Login",!1,`Erro: ${((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||s.message}`,(l=s.response)==null?void 0:l.data)}finally{i.value.login=!1}},P=async()=>{var r,e,o,l;i.value.chamados=!0;try{const s=await S.get("/chamados");f("Chamados",!0,`${((r=s.data)==null?void 0:r.length)||0} chamados encontrados`,s.data),v.chamados=s.data||[]}catch(s){f("Chamados",!1,`Erro: ${((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||s.message}`,(l=s.response)==null?void 0:l.data)}finally{i.value.chamados=!1}},E=async()=>{var r,e,o;i.value.status=!0;try{const l=await S.get("/chamadosPorStatus");f("Status",!0,"Status carregados com sucesso",l.data),v.chamadosPorStatus=l.data||{}}catch(l){f("Status",!1,`Erro: ${((e=(r=l.response)==null?void 0:r.data)==null?void 0:e.message)||l.message}`,(o=l.response)==null?void 0:o.data)}finally{i.value.status=!1}},N=async()=>{var r,e,o,l;i.value.locais=!0;try{const s=await S.get("/locais");f("Locais",!0,`${((r=s.data)==null?void 0:r.length)||0} locais encontrados`,s.data),v.topLocais=s.data||[]}catch(s){f("Locais",!1,`Erro: ${((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||s.message}`,(l=s.response)==null?void 0:l.data)}finally{i.value.locais=!1}};return(r,e)=>(h(),C(j,{class:"q-pa-md"},{default:t(()=>[n("div",J,[e[10]||(e[10]=n("div",{class:"col-12"},[n("div",{class:"text-h4"},"Teste de Conexão com API"),n("div",{class:"text-subtitle1 text-grey-7"},"Verificar se as APIs estão funcionando")],-1)),n("div",M,[a(L,null,{default:t(()=>[a(b,null,{default:t(()=>[e[0]||(e[0]=n("div",{class:"text-h6 q-mb-md"},"Testes de API",-1)),n("div",U,[a(y,{color:"primary",label:"Testar Login",onClick:q,loading:i.value.login,icon:"login"},null,8,["loading"]),a(y,{color:"secondary",label:"Testar Chamados",onClick:P,loading:i.value.chamados,icon:"assignment"},null,8,["loading"]),a(y,{color:"accent",label:"Testar Status",onClick:E,loading:i.value.status,icon:"analytics"},null,8,["loading"]),a(y,{color:"positive",label:"Testar Locais",onClick:N,loading:i.value.locais,icon:"place"},null,8,["loading"])])]),_:1})]),_:1})]),n("div",X,[a(L,null,{default:t(()=>[a(b,null,{default:t(()=>[e[2]||(e[2]=n("div",{class:"text-h6 q-mb-md"},"Resultados dos Testes",-1)),k.value.length===0?(h(),x("div",Y,[a(w,{name:"help",size:"3em"}),e[1]||(e[1]=n("div",{class:"q-mt-sm"},"Execute os testes para ver os resultados",-1))])):(h(),x("div",Z,[a(Q,{bordered:"",separator:""},{default:t(()=>[(h(!0),x($,null,B(k.value,(o,l)=>(h(),C(_,{key:l},{default:t(()=>[a(g,{avatar:""},{default:t(()=>[a(V,{color:o.success?"positive":"negative","text-color":"white"},{default:t(()=>[a(w,{name:o.success?"check":"close"},null,8,["name"])]),_:2},1032,["color"])]),_:2},1024),a(g,null,{default:t(()=>[a(d,null,{default:t(()=>[u(c(o.test),1)]),_:2},1024),a(d,{caption:""},{default:t(()=>[u(c(o.message),1)]),_:2},1024),o.data?(h(),C(d,{key:0,caption:""},{default:t(()=>[n("pre",G,c(JSON.stringify(o.data,null,2)),1)]),_:2},1024)):z("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]))]),_:1})]),_:1})]),n("div",H,[a(L,null,{default:t(()=>[a(b,null,{default:t(()=>[e[9]||(e[9]=n("div",{class:"text-h6 q-mb-md"},"Status da Autenticação",-1)),n("div",K,[n("div",W,[a(Q,{bordered:""},{default:t(()=>[a(_,null,{default:t(()=>[a(g,null,{default:t(()=>[a(d,null,{default:t(()=>[...e[3]||(e[3]=[u("Autenticado",-1)])]),_:1}),a(d,{caption:""},{default:t(()=>[a(O,{color:p(m).isAuthenticated?"positive":"negative"},{default:t(()=>[u(c(p(m).isAuthenticated?"Sim":"Não"),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),a(_,null,{default:t(()=>[a(g,null,{default:t(()=>[a(d,null,{default:t(()=>[...e[4]||(e[4]=[u("Email do Usuário",-1)])]),_:1}),a(d,{caption:""},{default:t(()=>[u(c(p(m).userEmail||"N/A"),1)]),_:1})]),_:1})]),_:1}),a(_,null,{default:t(()=>[a(g,null,{default:t(()=>[a(d,null,{default:t(()=>[...e[5]||(e[5]=[u("Token",-1)])]),_:1}),a(d,{caption:""},{default:t(()=>[u(c(p(m).token||"N/A"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),n("div",aa,[a(Q,{bordered:""},{default:t(()=>[a(_,null,{default:t(()=>[a(g,null,{default:t(()=>[a(d,null,{default:t(()=>[...e[6]||(e[6]=[u("Chamados Carregados",-1)])]),_:1}),a(d,{caption:""},{default:t(()=>[u(c(p(v).chamados.length),1)]),_:1})]),_:1})]),_:1}),a(_,null,{default:t(()=>[a(g,null,{default:t(()=>[a(d,null,{default:t(()=>[...e[7]||(e[7]=[u("Status Carregados",-1)])]),_:1}),a(d,{caption:""},{default:t(()=>[u(c(Object.keys(p(v).chamadosPorStatus).length),1)]),_:1})]),_:1})]),_:1}),a(_,null,{default:t(()=>[a(g,null,{default:t(()=>[a(d,null,{default:t(()=>[...e[8]||(e[8]=[u("Locais Carregados",-1)])]),_:1}),a(d,{caption:""},{default:t(()=>[u(c(p(v).topLocais.length),1)]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})])])]),_:1}))}});export{ia as default};
